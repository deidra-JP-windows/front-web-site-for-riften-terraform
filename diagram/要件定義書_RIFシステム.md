# RIFシステム要件定義書
## 概要・目的
本ドキュメントは、RIFシステム（ゲームコミュニティ用ウェブサイト）のインフラ・運用・開発に関する要件を整理し、関係者間の認識齟齬を防ぐことを目的とします。
## 背景・課題
- ゲームコミュニティの拡大に伴い、安定したインフラ・セキュリティ・運用効率が求められている
- ドキュメント・構成管理の一元化が必要
## 目標・ゴール
- AWSを中心としたIaCによる環境管理の実現
- コミュニティ利用者の利便性・安全性向上
- 低コストでの運用
- 運用・保守の効率化
## 業務要件
当システムの業務要件をまとめています。
### 業務要件
当システムの業務要件をまとめています。
#### 業務実施手順
- 業務範囲
  - サービス提供に必要な業務の範囲（運用、保守、サポート等）を明確にする。
    - 詳細は「シーケンス図_メンテナンスページ.md」参照
- 業務フロー
  - 業務の流れ、各工程の役割分担、承認・報告手順等を整理する。
    - 詳細は「ワークフロー図.md」「シーケンス図_メンテナンスページ.md」参照
- 業務体制
  - 業務遂行に必要な体制（担当者、管理者、外部委託等）を定義する。
    - 詳細は「シーケンス図_メンテナンスページ.md」参照
    - 管理者：当コミュニティ管理者
    - 担当者：当コミュニティ管理者
    - 外部委託等：なし
- 扱うデータ
  - 業務で取扱うデータの種類、量、管理方法、保管期間等を明確にする。
    - データ種類：ユーザ情報、利用履歴、障害履歴、変更履歴、Discode サーバに投稿された情報
    - データ量：初年度10GB、以降年間10GB増加（保存期間3年）
    - 管理方法：Amazon S3による冗長化・暗号化保存、アクセス制御（RBAC）、月次監査
    - 保管期間：3年
    - データ構造は「ER図（別途作成）」「データフロー図（別途作成）」参照
    - 業務手順は「業務フロー図.md」「シーケンス図_メンテナンスページ.md」「業務シーケンス図（別途作成）」参照
    - 業務体制は「AC図（別途作成）」参照
- 管理対象
  - 管理すべき資産（機器、ソフトウェア、ドキュメント等）とその管理方法を整理する。
    - 管理資産：AWSアカウント、S3バケット、Lambda関数、構成管理ドキュメント、運用マニュアル
    - 管理方法：IaCによる一元管理、変更履歴記録、月次棚卸
    - 資産管理は「AC図（別途作成）」参照
    - 管理対象一覧は「資産一覧表（別途作成）」参照
#### 規模
- サービスの利用者
  - 想定される利用者数、属性、利用シーン等を定義する。
    - 想定利用者数：初期20人、1年後30人、2年後40人
    - 属性：ゲームコミュニティ参加者（一般ユーザ、管理者）
    - 利用シーン：コミュニティ情報閲覧、障害報告、運用履歴参照
- 処理件数
  - 日次・月次・年間等の処理件数、ピーク時の負荷を想定し、必要なリソースを算出する。
    - 月間アクセス数：80回（20人×週1回）
    - ピーク時同時接続数：5
    - 年間障害報告件数：5件程度
#### 時期・時間
- 時間・時期
  - サービス提供・業務実施の時間帯、繁忙期・閑散期等の時期的要件を整理する。
    - サービス提供時間：24時間365日
    - 業務実施時間：平日10:00～18:00（障害対応は随時）
    - 繁忙期：新規ゲームリリース時、障害発生時
#### 場所等
- 業務の実施場所
  - 業務を実施する場所（オフィス、リモート、データセンター等）を明確にする。
    - 実施場所：リモート（在宅）、AWSクラウド環境
- 作業実施の際に留意すべき事項
  - セキュリティ、アクセス制限、作業環境等の留意事項を整理する。
    - 詳細は「AC図（別途作成）」参照
#### 管理すべき指標
- プロジェクト目標
  - サービス品質、コスト、納期等のプロジェクト目標を設定する。
    - サービス品質：SLA99.5%、Web応答速度1秒以内
    - コスト：月額1万円以内（AWS利用料）
    - 納期：初期構築2か月以内
- 管理すべき指標
  - SLA、KPI、CS等、管理すべき指標とその測定・報告方法を明確にする。
    - SLA：99.5%
    - KPI：月間アクセス数80回、障害復旧時間2時間以内、バックアップ成功率100%
    - CS（顧客満足度）：年次アンケートで80%以上
#### 情報システム化の範囲
  - 業務のうち情報システム化する範囲、対象業務、非対象業務を明確にする。
    - 情報システム化範囲：コミュニティ情報管理、障害報告・履歴管理、運用履歴管理
    - 非対象業務：物理設備管理、現地対応
#### 業務継続の方針等
  - 災害・障害時の業務継続方針、BCP（事業継続計画）策定、復旧手順等を整理する。
    - 詳細は「ワークフロー図.md」参照
#### 情報セキュリティ対策の基本的な考え方
  - 機密性・完全性・可用性を確保するための基本方針、脅威・脆弱性への対策、権限管理等を徹底する。
    - 詳細は「AC図（別途作成）」参照
### 機能要件
当システムの機能要件をまとめています。
#### 機能
  - サービス利用者の規模、増加予測、アクセス集中時の対応を明確にする。
  - 利用者数の推移（予測）

    | 時期      | 利用者数 |
    |-----------|----------|
    | サービス開始 | 20人     |
    | 1年後      | 30人     |
    | 2年後      | 40人     |
  - サーバ・ストレージ構成

    | 種別      | 構成内容                |
    |-----------|------------------------|
    | サーバ    | Lambda （サーバレス）|
    | ストレージ| Amazon S3（100GB/年）   |
    - UI設計は「UI設計書（別途作成）」参照
  - 主要性能指標

    | 指標                | 目標値      |
    |---------------------|-------------|
    | Webページ応答速度   | 1秒以内     |
    | APIレスポンスタイム | 500ms以内   |
    | バッチ処理所要時間  | 10分以内    |
    | 同時処理数          | 5           |
    - 詳細は「ワークフロー図.md」「ER図（別途作成）」「データフロー図（別途作成）」「ネットワーク構成図（別途作成）」「システム構成図（別途作成）」参照
#### 帳票
  - 必要な帳票（利用状況レポート、障害報告書、変更履歴等）の種類・出力要件を明確にする。
    - 帳票種類：利用状況レポート（月次）、障害報告書（随時）、変更履歴（月次）
    - 出力要件：CSV形式、S3保存、管理者のみ閲覧可
#### データ
  - 取扱うデータの種類、構造、保存・取得・更新・削除等の要件を整理する。
    - データ種類：ユーザ情報、利用履歴、障害履歴、変更履歴、Discode サーバに投稿された情報
    - データ構造：ER図（別途作成）参照
    - 保存：Amazon S3、暗号化保存
    - 取得・更新・削除：API経由（RBAC制御）
    - データ構造は「ER図（別途作成）」「データフロー図（別途作成）」参照
#### 外部インターフェイス
  - APIや外部サービス連携の仕様、認証・認可方式、データ交換フォーマット等を定義する。
    - API仕様：REST/JSON、OAuth2認証、APIキー管理
    - 外部サービス連携：Discord API（OAuth2）、外部APIはHTTPSのみ
    - API仕様は「API仕様書（別途作成）」参照
    - 外部連携は「外部サービス連携仕様書（別途作成）」参照
### 非機能要件
当システムの非機能要件をまとめています。
  - 非機能要件の詳細は「非機能要件一覧表（別途作成）」参照
#### ユーザビリティ
- ユーザ定義
  - 利用者の属性、利用シーン、権限区分等を定義し、ユーザビリティ向上を図る。
- ユーザビリティ
  - 操作性、分かりやすさ、ナビゲーション、ヘルプ機能等の要件を整理する。
  - UI設計は「UI設計書（別途作成）」参照
#### アクセシビリティ
  - 障害者や高齢者も含め、誰もが利用しやすいUI/UX設計、アクセシビリティ基準への準拠を徹底する。
  - 詳細は「UI設計書（別途作成）」参照
#### システム方式
- 構成
  - システム全体の構成（サーバ、ネットワーク、ストレージ等）を明確にし、冗長化・拡張性を考慮する。
- 開発方式
  - 開発手法（アジャイル、ウォーターフォール等）、CI/CD導入、品質管理体制を定義する。
- 全体構成
  - システムの全体像、各構成要素の役割・連携を整理する。
  - 詳細は「システム構成図（別途作成）」「ネットワーク構成図（別途作成）」参照
- 責任分界点
  - 運用・保守・開発等の責任範囲を明確にし、役割分担を徹底する。
#### 規模
- 機器
  - 必要なサーバ、ネットワーク機器、ストレージ等の台数・スペックを定義する。
  - サーバ：t-micro × 2台（冗長化）
  - ストレージ：Amazon S3（100GB/年見込み）
- 設置場所
  - 機器の設置場所：AWSリージョン「ap-northeast-1」（東京）、クラウド環境のみ、物理管理はAWSに委託
- データ量
  - 取扱うデータの量、増加予測、保存期間等を整理する。
  - 保存期間：3年
  - 年間増加量：10GB/年
- 処理件数
  - 日次・月次・年間等の処理件数、ピーク時の負荷を想定し、必要なリソースを算出する。
  - 月間アクセス数：80回（20人×週1回）
  - ピーク時同時接続数：5
- 利用者数
  - サービス利用者の規模、増加予測、アクセス集中時の対応を明確にする。
  - 初期：20人、1年後：30人（予測）
- アクセス数
  - 月間アクセス数：80回（20人×週1回）、ピーク時同時接続数：5、トラフィック量：1GB/月
- アクセス方式
  - Web（HTTPS）、API（REST/JSON）、バッチ（週1回Lambda）
#### 性能
- 性能
  - システム全体の応答速度、処理能力、スループット等の性能要件を定義する。
  - Webページ応答速度：1秒以内
  - APIレスポンスタイム：500ms以内
- オンライン処理の性能
  - オンライン処理におけるレスポンスタイム、同時処理数、可用性等の要件を明確にする。
  - 同時処理数：5
  - 可用性：99.5%
- バッチ処理の性能
  - バッチ処理の所要時間、処理件数、スケジューリング要件等を整理する。
  - バッチ処理頻度：週1回
  - バッチ処理所要時間：10分以内
- 検証環境の性能
  - Web応答速度2秒以内、APIレスポンス1秒以内、同時接続数3
#### 信頼性
- 信頼性の要件
  - システムの安定稼働、障害発生時の迅速な復旧、データの保全性を確保する。
  - MTTR（平均復旧時間）：2時間以内
  - MTBF（平均故障間隔）：6か月以上
- 可用性の要件
  - サービス停止リスクの最小化、冗長化・バックアップ・フェイルオーバー設計を徹底する。
  - SLA：99.5%
  - バックアップ頻度：毎日
- 完全性の要件
  - データの正確性・一貫性・改ざん防止を担保する。
  - データ改ざん検知：月次監査
#### 拡張性
- 性能の拡張性
  - 利用者増加やデータ量増加に対応できるよう、システム性能の拡張性を確保する。
  - サーバ増設可能（最大5台まで）
- 機能の拡張性
  - 新機能追加や外部連携など、将来的な機能拡張に柔軟に対応できる設計とする。
  - API追加・外部サービス連携は随時対応
#### 上位互換
- ハードウェアの上位互換性
  - 新世代ハードウェアへの移行や追加導入時も、既存システムとの互換性を維持する。
- ソフトウェアの上位互換性
  - OSやミドルウェア、アプリケーションのバージョンアップ時も、既存機能やデータの互換性を担保する。
#### 中立性
  - 特定ベンダーや技術に依存せず、将来的な選択肢の拡大や移行の容易性を確保する。
#### 継続性
- 想定するリスク
  - 災害・障害・サイバー攻撃等、事業継続を脅かすリスクを洗い出し、対策を講じる。
- 事業再開の定義
  - 事業再開の条件・手順・体制を明確にし、迅速な復旧を可能とする。
- 継続性に係る目標値
  - RTO（目標復旧時間）：4時間以内
  - RPO（目標復旧時点）：24時間以内
- 継続性に係る対策
  - バックアップ、冗長化、代替手段の確保など、継続性確保のための具体的な対策を実施する。
#### 情報セキュリティ
  - 機密性・完全性・可用性を確保し、脅威・脆弱性への対策、権限管理、監査ログ取得等を徹底する。
  - 権限管理：ロールベースアクセス制御（RBAC）
  - 監査ログ保存期間：1年
  - 脆弱性診断：年2回
#### 情報システム稼働環境
- ネットワーク構成
  - システム全体のネットワーク設計、セグメント分離、冗長化などを明確にする。
- ハードウェア構成
  - Amazon S3 のみを利用（サーバレス構成）
- 共通要件
  - サイトへのアクセスは Amazon S3 と AWS Lambda を使った独自認証基盤で制御
  - AWSアカウントへのアクセスは IdCグループ（AWS Identity Center）によるRBAC（ロールベースアクセス制御）を実装
  - セキュリティ：AWS IAMポリシーによる権限管理
  - 可用性：99.5%以上
  - 拡張性：S3バケット追加・Lambda関数追加で対応
- 本番環境
  - CloudFront＋S3構成、監視（CloudWatch）、バックアップ（毎月）
- 業務検証環境
  - S3検証バケット、アクセス制御（IP制限）、テスト用データ
- ストレージ要件
  - S3保存、容量100GB/年、冗長化（標準）、バックアップ（毎日）
- 周辺機器
  - UPS（無停電電源装置）、KVM（仮想化）、プリンタ不要
- ネットワーク要件
  - 帯域10Mbps以上、遅延100ms以下、冗長化（CloudFront）、セキュリティ（WAF）
- クライアント端末要件
  - Windows/Mac/iOS/Android対応、Chrome最新版、セキュリティパッチ適用
- 施設・設備要件
  - クラウド利用のため物理設備不要、電源・空調はAWS管理
- 外部接続機能要件
  - Discord API連携（OAuth2）、外部APIはHTTPSのみ、APIキー管理
#### テスト
- テスト概要
  - システム全体のテスト方針、目的、対象範囲を明確にする。
- 体制と役割
  - テスト実施体制、担当者の役割分担、責任範囲を定義する。
- テストに関する要件
  - テスト項目、品質基準、テスト環境、障害対応手順などの要件を整理する。
  - 詳細は「テストケース一覧（別途作成）」「テスト仕様書（別途作成）」参照
#### 移行
- 移行手順
  - システムやデータの移行に関する具体的な手順を策定し、計画的に実施する。
- 移行要件
  - 移行対象の範囲、移行時の品質・安全性・可用性などの要件を明確にし、リスクを最小化する。
  - 詳細は「移行計画書（別途作成）」参照
#### 引継ぎ
- 引継ぎ事項
  - 業務やシステム運用に必要な情報・ノウハウ・履歴を整理し、確実に引継ぐ。
- 引継ぎ手順
  - 引継ぎの流れや担当者、必要なドキュメント・教育内容を明確にし、円滑な引継ぎを実施する。
  - 詳細は「引継ぎ手順書（別途作成）」参照
#### 教育
- 教育の担当者の範囲
  - システム運用・保守に関わる担当者の範囲を定義し、必要な教育を計画する。
- 教育方法
  - 実践的な研修、マニュアル・FAQの活用、OJTなど多様な教育方法を採用する。
- 教材の作成
  - 運用・保守手順書、障害対応マニュアル、変更履歴などの教材を整備し、常に最新化する。
  - 詳細は「教育教材一覧（別途作成）」参照
#### 運用
- 障害管理機能
  - システム障害の検知、一次対応、復旧、原因分析、再発防止策の実施。
- ネットワーク管理機能
  - ネットワーク構成の管理、トラフィック監視、障害対応。
- クライアント端末管理機能
  - 利用端末の管理、セキュリティ設定、障害対応。
- サーバ管理機能
  - サーバの構成管理、リソース監視、障害対応。
- 仮想サーバ管理機能
  - 仮想化環境の運用・管理、リソース割当、障害対応。
- ストレージ管理機能
  - データ保存領域の管理、容量監視、障害対応。
- バックアップ管理機能
  - 定期バックアップの実施、リストア手順の整備、障害時の復旧。
- ITサービスマネジメント機能
  - ITIL等に基づく運用管理、サービス品質の維持。
- 電源管理機能
  - サーバ・ネットワーク機器の電源管理、障害時の対応。
10. ログ管理機能
  - システム・操作ログの取得、監査、保管、分析。
- セキュリティ管理機能
  - 権限管理、脆弱性対応、インシデント対応、監査ログ取得。
- 情報共有機能
  - 運用情報・障害情報・変更履歴の共有。
- サービスメンテナンス機能
  - 定期メンテナンスの計画・実施、影響範囲の通知。
- デプロイ機能
  - 新機能・修正の本番反映、ロールバック手順の整備。
- システム移行対応
  - 新環境への移行計画、データ移行、移行後の検証。
#### 保守
- 基本設計
  - 本システムの保守においては、安定した運用と継続的な改善を目指す。
- 予防保守
  - 定期的な点検やソフトウェアのアップデート、脆弱性対応を実施する。
- 障害管理
  - 障害発生時の迅速な検知と一次対応、復旧作業、原因分析および再発防止策の徹底を図る。
- 可用性管理
  - システムの冗長化や定期的なバックアップ、フェイルオーバー設計を行い、サービス停止リスクを最小化する。
- 性能管理
  - リソースの監視やボトルネック分析、パフォーマンスチューニングを継続的に実施し、例えばデータベースのバージョンアップやオプティマイザ更新等による実行計画の変化、機器の経年劣化など能劣化の要因にも注意する。
- ネットワーク管理
  - 構成変更やトラフィック監視、障害発生時の迅速な対応を行う。
- セキュリティ管理
  - 脆弱性診断や権限管理、監査ログの取得、インシデント対応を徹底する。
- 構成管理
  - IaCによる一元管理と変更履歴の記録を行う。
- 変更管理
  - 申請・承認・テスト・本番反映までのプロセスを厳格に運用する。
- リリース管理
  - リリース計画の策定、影響範囲の事前通知、ロールバック手順の整備を行う。
- 保全管理
  - 資産管理やライフサイクル管理、廃棄手順の明確化を含む。
- 外部接続機能
  - APIや外部サービス連携の監視・保守を実施する。
- 報告関連
  - 定期レポートの作成や障害・変更・保守履歴の記録を行う。
- ドキュメント整備
  - 運用・保守手順書や障害対応マニュアル、変更履歴を常に最新化する。
- サポート体制
  - 問い合わせ対応、FAQ整備、教育・引継ぎを充実させる。
- 保守に係る目標値
  - SLA（サービスレベル合意）、MTTR（平均復旧時間）、MTBF（平均故障間隔）などを設定し、これらの達成に向けて運用を行う。